<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 650">
  <!-- Background -->
  <rect width="900" height="650" fill="#f8fafc"/>

  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" font-family="system-ui, sans-serif" font-size="20" font-weight="bold" fill="#1e293b">Marathon WAD File Structure</text>
  <text x="450" y="50" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" fill="#64748b">Custom format — NOT compatible with Doom WADs</text>

  <!-- File layout (left side) -->
  <g transform="translate(50, 80)">
    <text x="140" y="0" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" fill="#475569">File Layout</text>

    <!-- WAD Header -->
    <rect x="0" y="20" width="280" height="80" rx="6" fill="#dbeafe" stroke="#2563eb" stroke-width="2"/>
    <text x="140" y="45" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="bold" fill="#1e40af">WAD Header (128 bytes)</text>
    <text x="15" y="65" font-family="monospace" font-size="9" fill="#1e40af">version: short</text>
    <text x="15" y="78" font-family="monospace" font-size="9" fill="#1e40af">data_version: short</text>
    <text x="140" y="65" font-family="monospace" font-size="9" fill="#1e40af">wad_count: short</text>
    <text x="140" y="78" font-family="monospace" font-size="9" fill="#1e40af">directory_offset: long</text>
    <text x="15" y="91" font-family="monospace" font-size="9" fill="#1e40af">file_name[64]: char</text>

    <!-- Arrow -->
    <line x1="140" y1="100" x2="140" y2="115" stroke="#475569" stroke-width="2"/>
    <polygon points="140,120 135,110 145,110" fill="#475569"/>

    <!-- Entry 0 -->
    <rect x="0" y="125" width="280" height="60" rx="6" fill="#dcfce7" stroke="#16a34a" stroke-width="2"/>
    <text x="140" y="148" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="bold" fill="#166534">Entry 0 Data (Level 0)</text>
    <text x="140" y="165" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#16a34a">Tagged chunks: polygons, lines, sides...</text>
    <text x="140" y="178" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#64748b">variable size</text>

    <!-- Arrow -->
    <line x1="140" y1="185" x2="140" y2="200" stroke="#475569" stroke-width="2"/>
    <polygon points="140,205 135,195 145,195" fill="#475569"/>

    <!-- Entry 1 -->
    <rect x="0" y="210" width="280" height="60" rx="6" fill="#dcfce7" stroke="#16a34a" stroke-width="2"/>
    <text x="140" y="233" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="bold" fill="#166534">Entry 1 Data (Level 1)</text>
    <text x="140" y="250" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#16a34a">Tagged chunks: polygons, lines, sides...</text>
    <text x="140" y="263" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#64748b">variable size</text>

    <!-- Dots -->
    <text x="140" y="295" text-anchor="middle" font-family="system-ui, sans-serif" font-size="16" fill="#64748b">⋮</text>

    <!-- Entry N -->
    <rect x="0" y="310" width="280" height="60" rx="6" fill="#dcfce7" stroke="#16a34a" stroke-width="2"/>
    <text x="140" y="333" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="bold" fill="#166534">Entry N Data (Level N)</text>
    <text x="140" y="350" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#16a34a">Tagged chunks...</text>
    <text x="140" y="363" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#64748b">variable size</text>

    <!-- Arrow -->
    <line x1="140" y1="370" x2="140" y2="385" stroke="#475569" stroke-width="2"/>
    <polygon points="140,390 135,380 145,380" fill="#475569"/>

    <!-- Directory -->
    <rect x="0" y="395" width="280" height="100" rx="6" fill="#fef3c7" stroke="#d97706" stroke-width="2"/>
    <text x="140" y="418" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="bold" fill="#92400e">Directory (at end of file)</text>
    <text x="15" y="440" font-family="monospace" font-size="9" fill="#92400e">entry[0]: offset, size, index</text>
    <text x="15" y="455" font-family="monospace" font-size="9" fill="#92400e">entry[1]: offset, size, index</text>
    <text x="15" y="470" font-family="monospace" font-size="9" fill="#92400e">...</text>
    <text x="15" y="485" font-family="monospace" font-size="9" fill="#92400e">entry[N]: offset, size, index</text>
  </g>

  <!-- Entry structure (right side) -->
  <g transform="translate(380, 80)">
    <text x="230" y="0" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" fill="#475569">Entry (Level) Structure</text>

    <!-- Entry header -->
    <rect x="0" y="20" width="460" height="70" rx="6" fill="#e0e7ff" stroke="#6366f1" stroke-width="2"/>
    <text x="230" y="42" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="bold" fill="#4338ca">Entry Header (16 bytes)</text>
    <text x="15" y="62" font-family="monospace" font-size="9" fill="#4338ca">offset: long (file position of data)</text>
    <text x="15" y="77" font-family="monospace" font-size="9" fill="#4338ca">size: long (total bytes)   index: short (level #)   mission_flags: word</text>

    <!-- Arrow -->
    <line x1="230" y1="90" x2="230" y2="105" stroke="#475569" stroke-width="2"/>
    <polygon points="230,110 225,100 235,100" fill="#475569"/>

    <!-- Chunk list -->
    <rect x="0" y="115" width="460" height="380" rx="6" fill="#f8fafc" stroke="#94a3b8" stroke-width="2"/>
    <text x="230" y="138" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="bold" fill="#475569">Tagged Chunks (variable count)</text>

    <!-- Individual chunks -->
    <rect x="15" y="150" width="430" height="45" rx="4" fill="#dbeafe" stroke="#2563eb" stroke-width="1"/>
    <text x="30" y="168" font-family="monospace" font-size="9" fill="#1e40af">tag: 'PNTS'  size: N  data: endpoint_data[N/sizeof]</text>
    <text x="30" y="183" font-family="system-ui, sans-serif" font-size="9" fill="#3b82f6">Endpoints (2D vertices)</text>

    <rect x="15" y="200" width="430" height="45" rx="4" fill="#dcfce7" stroke="#16a34a" stroke-width="1"/>
    <text x="30" y="218" font-family="monospace" font-size="9" fill="#166534">tag: 'LINS'  size: N  data: line_data[N/sizeof]</text>
    <text x="30" y="233" font-family="system-ui, sans-serif" font-size="9" fill="#16a34a">Lines (wall segments)</text>

    <rect x="15" y="250" width="430" height="45" rx="4" fill="#fef3c7" stroke="#d97706" stroke-width="1"/>
    <text x="30" y="268" font-family="monospace" font-size="9" fill="#92400e">tag: 'POLY'  size: N  data: polygon_data[N/sizeof]</text>
    <text x="30" y="283" font-family="system-ui, sans-serif" font-size="9" fill="#d97706">Polygons (rooms/areas)</text>

    <rect x="15" y="300" width="430" height="45" rx="4" fill="#f3e8ff" stroke="#9333ea" stroke-width="1"/>
    <text x="30" y="318" font-family="monospace" font-size="9" fill="#7e22ce">tag: 'SIDS'  size: N  data: side_data[N/sizeof]</text>
    <text x="30" y="333" font-family="system-ui, sans-serif" font-size="9" fill="#9333ea">Sides (wall textures)</text>

    <rect x="15" y="350" width="430" height="45" rx="4" fill="#cffafe" stroke="#0891b2" stroke-width="1"/>
    <text x="30" y="368" font-family="monospace" font-size="9" fill="#0e7490">tag: 'LITE'  size: N  data: light_data[N/sizeof]</text>
    <text x="30" y="383" font-family="system-ui, sans-serif" font-size="9" fill="#0891b2">Light sources</text>

    <rect x="15" y="400" width="430" height="45" rx="4" fill="#fecaca" stroke="#dc2626" stroke-width="1"/>
    <text x="30" y="418" font-family="monospace" font-size="9" fill="#991b1b">tag: 'OBJS'  size: N  data: map_object[N/sizeof]</text>
    <text x="30" y="433" font-family="system-ui, sans-serif" font-size="9" fill="#dc2626">Objects (monsters, items, scenery)</text>

    <rect x="15" y="450" width="430" height="35" rx="4" fill="#f1f5f9" stroke="#64748b" stroke-width="1"/>
    <text x="230" y="472" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#64748b">+ PLAT, MEDI, NOTE, MNPX, TERM, ... (many more tags)</text>
  </g>

  <!-- Important notes -->
  <g transform="translate(50, 530)">
    <rect x="0" y="0" width="400" height="80" rx="6" fill="#fef2f2" stroke="#dc2626" stroke-width="2"/>
    <text x="200" y="22" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="bold" fill="#991b1b">Big-Endian Warning</text>
    <text x="15" y="42" font-family="system-ui, sans-serif" font-size="10" fill="#991b1b">All multi-byte values are big-endian (Mac format)</text>
    <text x="15" y="58" font-family="system-ui, sans-serif" font-size="10" fill="#991b1b">Must byte-swap on x86/ARM systems</text>
    <text x="15" y="74" font-family="monospace" font-size="9" fill="#991b1b">swap16(), swap32() before use</text>
  </g>

  <g transform="translate(470, 530)">
    <rect x="0" y="0" width="380" height="80" rx="6" fill="#f0fdf4" stroke="#16a34a" stroke-width="2"/>
    <text x="190" y="22" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="bold" fill="#166534">Platform Independent</text>
    <text x="15" y="42" font-family="system-ui, sans-serif" font-size="10" fill="#166534">Standard binary file (data fork only)</text>
    <text x="15" y="58" font-family="system-ui, sans-serif" font-size="10" fill="#166534">No Mac resource forks needed</text>
    <text x="15" y="74" font-family="system-ui, sans-serif" font-size="10" fill="#166534">Read with fopen/fread on any platform</text>
  </g>

  <!-- Source reference -->
  <text x="450" y="640" text-anchor="middle" font-family="monospace" font-size="10" fill="#94a3b8">Source: wad.h, wad.c — struct wad_header, struct directory_entry</text>
</svg>
